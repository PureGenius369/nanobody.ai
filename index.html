<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>NanobodyAI Predictor â€“ Mann Sutariya, PDEU</title>

<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
--navy:#003d82;--blue:#0057b8;--sky:#4a90e2;
--orange:#ff6b35;--red:#e63946;--green:#059669;
--gold:#d97706;--bg:#eef3fb;--card:#fff;
--text:#1e293b;--muted:#64748b;--border:#e2e8f0
}
body{font-family:'Segoe UI',Arial,sans-serif;background:var(--bg);min-height:100vh;color:var(--text)}

.card{background:var(--card);border-radius:14px;padding:22px;box-shadow:0 2px 12px rgba(0,0,0,.07)}
.sec-head{font-size:12px;font-weight:700;color:var(--navy);text-transform:uppercase;border-bottom:2px solid var(--orange);padding-bottom:8px;margin-bottom:16px}
.btn{width:100%;padding:16px;border:none;border-radius:12px;font-size:15px;font-weight:800;color:#fff;cursor:pointer;background:linear-gradient(135deg,var(--orange),var(--red))}
.metric-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:14px 0}
.metric-box{background:#f8faff;border:1px solid var(--border);border-radius:10px;padding:14px;text-align:center}
.gauge-track{height:9px;background:var(--border);border-radius:5px;overflow:hidden;margin-top:4px}
.gauge-fill{height:100%;border-radius:5px;transition:width 1s ease}
</style>
</head>

<body>

<div style="background:linear-gradient(135deg,#003d82,#0057b8);color:#fff;padding:22px">
<h1>ðŸ§¬ NanobodyAI Predictor</h1>
<p>AI-Inspired Nanobody Affinity & BBB Penetration Model</p>
</div>

<div style="max-width:1000px;margin:30px auto;padding:20px">

<div class="card">

<div class="sec-head">Biophysical Parameters</div>
<div id="sliders"></div>

<button class="btn" id="predictBtn" onclick="runPrediction()">ðŸš€ Run AI Prediction</button>

</div>

<div class="card" style="margin-top:20px">
<div id="output"></div>
</div>

</div>

<script>

const FEATURES=[
{id:"mw",label:"Molecular Weight",min:10,max:30,step:.5,def:15},
{id:"cdr3",label:"CDR3 Length",min:5,max:25,step:1,def:14},
{id:"hydro",label:"Hydrophobicity",min:-3,max:3,step:.1,def:.5},
{id:"pi",label:"Isoelectric pI",min:4,max:10,step:.1,def:7},
{id:"charge",label:"Net Charge",min:-5,max:5,step:1,def:1},
{id:"tm",label:"Thermostability",min:40,max:90,step:1,def:68}
];

const sliderVals={};

FEATURES.forEach(f=>{
sliderVals[f.id]=f.def;
document.getElementById('sliders').innerHTML+=`
<div style="margin-bottom:12px">
<label>${f.label}: <span id="v-${f.id}">${f.def}</span></label>
<input type="range" min="${f.min}" max="${f.max}" step="${f.step}" value="${f.def}"
oninput="sliderVals['${f.id}']=this.value;document.getElementById('v-${f.id}').innerText=this.value">
</div>`;
});

function clamp(v,min,max){return Math.max(min,Math.min(max,v));}

function runPrediction(){

const v=sliderVals;

// stability
let stability=50+(v.tm-60)*1.2-Math.abs(v.hydro)*8;
stability=clamp(stability,10,95);

// selectivity
let selectivity=40+(v.cdr3-10)*2.5;
if(v.pi>=6.5&&v.pi<=8.5)selectivity+=10;
selectivity=clamp(selectivity,10,95);

// BBB
let bbb=3+v.charge*0.6-(v.mw-15)*0.15;
bbb=clamp(bbb,0.1,9.5);

// binding affinity
let kd=40-(v.cdr3-12)*1.8-(selectivity-50)*0.2+Math.abs(v.hydro)*3;
kd=clamp(kd,0.5,95);

// half life
let halfLife=8+stability*0.6;
halfLife=clamp(halfLife,1,120);

// overall
let overall=Math.round(selectivity*.35+stability*.25+(100-kd)*.25+bbb*6);
overall=clamp(overall,10,98);

let grade="D";
if(overall>85)grade="A+";
else if(overall>75)grade="A";
else if(overall>65)grade="B+";
else if(overall>55)grade="B";


let verdict=
overall>80?"Excellent Candidate":
overall>65?"Good Candidate":
overall>50?"Moderate Candidate":"Poor Candidate";

document.getElementById('output').innerHTML=`

<h2>Prediction Result</h2>

<div class="metric-grid">
<div class="metric-box"><b>KD</b><br>${kd.toFixed(2)} nM</div>
<div class="metric-box"><b>BBB</b><br>${(bbb*10).toFixed(1)}%</div>
<div class="metric-box"><b>Half-life</b><br>${Math.round(halfLife)} h</div>
</div>

<p><b>Selectivity:</b> ${Math.round(selectivity)}</p>
<div class="gauge-track"><div class="gauge-fill" style="width:${selectivity}%;background:#059669"></div></div>

<p><b>Stability:</b> ${Math.round(stability)}</p>
<div class="gauge-track"><div class="gauge-fill" style="width:${stability}%;background:#0057b8"></div></div>

<h3>Grade: ${grade}</h3>
<p>${verdict}</p>
`;

}

</script>

</body>
</html>
